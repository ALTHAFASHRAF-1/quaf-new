<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Loading... - Quaf Academic Journal</title>
    <meta name="description" content="An analytical study from Quaf Academic Journal of Islamic Studies.">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="arabic-styles.css">
    <!-- Google Fonts for Arabic -->
    <link href="https://fonts.googleapis.com/css2?family=Scheherazade+New:wght@400;500;600;700&family=Amiri:wght@400;700&family=Lateef:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
    body {
        font-family: 'Inter', sans-serif;
        line-height: 1.6;
        color: #1a202c;
    }
    
    .academic-title {
        font-family: 'Crimson Text', serif;
    }
    
    .article-content h1, 
    .article-content h2, 
    .article-content h3 {
        font-family: 'Crimson Text', serif;
        font-weight: 500;
    }
    
    .article-content p {
        margin-bottom: 1rem;
        text-align: justify;
        line-height: 1.7;
    }
    
    .article-content h2 {
        margin-top: 2rem;
        margin-bottom: 1rem;
        font-size: 1.5rem;
        color: #2d3748;
    }
    
    .article-content h3 {
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
        font-size: 1.25rem;
        color: #4a5568;
    }
    
    .citation-box {
        background: #f7fafc;
        border-left: 4px solid #4299e1;
        padding: 1rem;
        margin: 1rem 0;
        font-style: italic;
    }
    
    .hadith-quote {
        background: #f8fafc;
        border-left: 4px solid #22c55e;
        padding: 1.5rem;
        margin: 1.5rem 0;
        border-radius: 0 8px 8px 0;
    }
    
    .quranic-verse {
        background: #fffbeb;
        border-left: 4px solid #f59e0b;
        padding: 1.5rem;
        margin: 1.5rem 0;
        border-radius: 0 8px 8px 0;
        font-style: italic;
    }
    
    .logo-container {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }
    
    .logo-image {
        height: 40px;
        width: auto;
    }
    
    .logo-text-container {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
    }
    
    .logo-text {
        line-height: 1;
        margin: 0;
    }
    
    .logo-subtitle {
        font-size: 0.75rem;
        color: #6b7280;
        margin: 0;
        line-height: 1;
        font-weight: 400;
    }
    
    /* PERFECT ARTICLE TITLE SIZING */
    #article-title {
        font-size: 2rem !important;
        line-height: 1.3 !important;
        margin-bottom: 1.5rem !important;
        font-weight: 600 !important;
        color: #1f2937 !important;
        letter-spacing: -0.025em !important;
    }
    
    /* Mobile adjustment for article title */
    @media (max-width: 768px) {
        #article-title {
            font-size: 1.625rem !important;
            line-height: 1.25 !important;
            margin-bottom: 1.25rem !important;
            letter-spacing: -0.02em !important;
        }
    }
    
    /* Small mobile devices */
    @media (max-width: 480px) {
        #article-title {
            font-size: 1.5rem !important;
            line-height: 1.2 !important;
            margin-bottom: 1rem !important;
        }
    }
    
    /* Adjust spacing for smaller title */
    .author-info {
        margin-top: 0.75rem !important;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        border-radius: 12px;
        padding: 1.5rem;
        margin: 1.5rem 0;
        border: 1px solid #e2e8f0;
    }
    
    .author-info h3 {
        color: #1e293b;
        font-weight: 600;
        margin-bottom: 1rem;
        font-size: 1.125rem;
    }
    
    #author-container .mb-4:last-child {
        margin-bottom: 0 !important;
    }
    
    .author-info .fas.fa-user {
        font-size: 0.875rem;
    }
    
    .author-info .fas.fa-envelope {
        font-size: 0.75rem;
    }
    
    .article-metadata {
        margin-top: 1.25rem !important;
        background: #ffffff;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        padding: 1.5rem;
        margin: 1.5rem 0;
    }
    
    #keywords-container {
        margin-top: 0.75rem !important;
        margin-bottom: 1.25rem !important;
    }
    
    .article-content {
        margin-top: 1.75rem !important;
    }
    
    .article-content section {
        margin-bottom: 1.75rem !important;
    }
    
    .article-content section:first-child {
        margin-top: 0 !important;
    }
    
    .pdf-modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.95);
        backdrop-filter: blur(5px);
    }
    
    .pdf-modal-content {
        position: relative;
        margin: auto;
        padding: 0;
        width: 95%;
        height: 95%;
        max-width: 1200px;
        margin-top: 1%;
        background: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    }
    
    .pdf-header {
        background: #1f2937;
        color: white;
        padding: 1rem;
        display: flex;
        justify-content: between;
        align-items: center;
        border-radius: 8px 8px 0 0;
    }
    
    .pdf-title {
        font-size: 1rem;
        font-weight: 600;
        flex-grow: 1;
        margin-right: 1rem;
    }
    
    .pdf-controls {
        display: flex;
        gap: 0.5rem;
        align-items: center;
    }
    
    .pdf-button {
        background: #374151;
        color: white;
        border: none;
        padding: 0.5rem;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.2s;
        font-size: 0.875rem;
        display: flex;
        align-items: center;
        gap: 0.25rem;
    }
    
    .pdf-button:hover {
        background: #4b5563;
    }
    
    .pdf-close {
        background: #ef4444;
        color: white;
        border: none;
        padding: 0.5rem;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.2s;
        font-size: 1rem;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .pdf-close:hover {
        background: #dc2626;
    }
    
    .pdf-viewer-container {
        position: relative;
        height: calc(100% - 70px);
        background: #f3f4f6;
    }
    
    .pdf-iframe {
        width: 100%;
        height: 100%;
        border: none;
        background: white;
    }
    
    .pdf-fallback {
        display: none;
        padding: 2rem;
        text-align: center;
        height: 100%;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #f9fafb;
    }
    
    .pdf-fallback.active {
        display: flex;
    }
    
    .fallback-content {
        max-width: 400px;
    }
    
    .fallback-icon {
        font-size: 4rem;
        color: #9ca3af;
        margin-bottom: 1rem;
    }
    
    .fallback-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: #374151;
        margin-bottom: 0.5rem;
    }
    
    .fallback-description {
        color: #6b7280;
        margin-bottom: 2rem;
        line-height: 1.6;
    }
    
    .download-button {
        background: #3b82f6;
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 6px;
        text-decoration: none;
        font-weight: 500;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        transition: background-color 0.2s;
    }
    
    .download-button:hover {
        background: #2563eb;
    }
    
    .keywords {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin: 1rem 0;
    }
    
    .keyword-tag {
        background: #ebf8ff;
        color: #2b6cb0;
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 600;
    }
    
    .arabic-text {
        font-family: 'Traditional Arabic', 'Al Bayan', 'Geeza Pro', serif;
        font-size: 1.1em;
        direction: rtl;
        text-align: right;
    }
    
    .loading-spinner {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid #f3f3f3;
        border-top: 3px solid #3498db;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    .loading-overlay {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 50vh;
        flex-direction: column;
        gap: 1rem;
    }
    
    .error-message {
        color: #ef4444;
        text-align: center;
        padding: 2rem;
        background: #fef2f2;
        border-radius: 8px;
        margin: 2rem;
    }
    
    /* Mobile Responsive */
    @media (max-width: 768px) {
        .logo-image {
            height: 32px;
        }
        .logo-text {
            font-size: 1rem;
        }
        .logo-subtitle {
            font-size: 0.65rem;
        }
        .pdf-modal-content {
            width: 98%;
            height: 98%;
            margin-top: 1%;
        }
        .pdf-title {
            font-size: 0.875rem;
        }
        .pdf-button {
            padding: 0.375rem;
            font-size: 0.75rem;
        }
        .pdf-controls {
            gap: 0.25rem;
        }
        .pdf-header {
            padding: 0.75rem;
        }
        .fallback-icon {
            font-size: 3rem;
        }
        .fallback-title {
            font-size: 1.25rem;
        }
        
        /* Mobile responsive for authors */
        .author-info {
            padding: 1rem;
        }
        
        #author-container .flex {
            flex-direction: column;
            space-x: 0;
        }
        
        #author-container .flex-shrink-0 {
            margin-bottom: 0.75rem;
            align-self: flex-start;
        }
    }
    
    /* iOS Safari specific fixes */
    @media screen and (-webkit-min-device-pixel-ratio: 0) {
        .pdf-iframe {
            -webkit-overflow-scrolling: touch;
        }
    }

    /* Mobile Menu Button - Ensure proper positioning and visibility */
.md\:hidden button {
    position: relative;
    z-index: 50;
}

/* Mobile Navigation Menu - Fix positioning and display */
#mobile-nav {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 45;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

/* Ensure mobile nav stays hidden by default */
#mobile-nav.hidden {
    display: none !important;
}

/* When mobile nav is shown */
#mobile-nav:not(.hidden) {
    display: block;
}

/* Mobile navigation container positioning */
@media (max-width: 768px) {
    /* Navigation container */
    .max-w-7xl {
        position: relative;
    }
    
    /* Mobile menu items - ensure proper touch targets */
    #mobile-nav .space-y-1 a {
        position: relative;
        display: block;
        min-height: 44px; /* iOS touch target minimum */
        line-height: 1.4;
        padding: 12px 16px;
    }
    
    /* Fix logo container alignment on mobile */
    .logo-container {
        align-items: center;
        justify-content: flex-start;
    }
    
    /* Ensure header items don't overlap */
    .flex.justify-between.items-center.h-16 {
        position: relative;
        z-index: 40;
    }
}

/* Prevent content shift when mobile menu opens */
nav.sticky {
    position: sticky;
    top: 0;
    z-index: 40;
}

/* Google Drive PDF indicator */
.pdf-button .fab.fa-google-drive {
    color: #4285f4;
}

.google-drive-indicator {
    background: #4285f4;
    color: white;
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    margin-left: 0.5rem;
}
/* Add this new CSS rule around line 200-250 in the <style> section */
/* Abstract heading underline for all articles */
.article-content section h2:first-of-type::after {
    content: '';
    display: block;
    width: 300px;
    height: 2px;
    background: linear-gradient(90deg, #f59e0b, #d97706);
    margin-top: 0.5rem;
    border-radius: 2px;
}
        
</style>
</head>

<body>
<!-- Navigation -->
<nav class="bg-white shadow-sm sticky top-0 z-40">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="flex justify-between items-center h-16">
<div class="flex items-center">
<div class="flex-shrink-0"> 
<a href="index.html" class="logo-container">
<img src="logo.png" alt="Quaf Academic Logo" class="logo-image">
<div class="logo-text-container">
<h1 class="logo-text text-xl font-bold text-black-900 academic-title">
Quaf Academic
</h1>
<p class="logo-subtitle">Journal of Islamic Studies</p>
</div>
</a> 
</div>
</div>
            
            <!-- Desktop Navigation Links -->
            <div class="hidden md:flex items-center space-x-6">
                <a href="index.html" class="text-gray-700 hover:text-blue-900 px-3 py-2 text-sm font-medium transition-colors">Home</a>
                <a href="all-issues.html" class="text-gray-700 hover:text-blue-900 px-3 py-2 text-sm font-medium transition-colors">All Issues</a>
            </div>

            <!-- Mobile Menu Button -->
            <div class="md:hidden">
                <button id="mobile-menu-btn" class="text-gray-700 hover:text-blue-900 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>

        <!-- Mobile Navigation Menu -->
        <div id="mobile-nav" class="md:hidden hidden bg-white border-t border-gray-200">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="index.html" class="block text-gray-700 hover:text-blue-900 hover:bg-gray-50 px-3 py-2 rounded-md text-sm font-medium transition-colors">Home</a>
                <a href="all-issues.html" class="block text-gray-700 hover:text-blue-900 hover:bg-gray-50 px-3 py-2 rounded-md text-sm font-medium transition-colors">All Issues</a>
            </div>
        </div>
    </div>
</nav>


    <!-- Main Content -->
    <main class="min-h-screen bg-gray-50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            
            <!-- Loading State -->
            <div id="loading-state" class="loading-overlay">
                <div class="loading-spinner"></div>
                <p class="text-gray-600">Loading article...</p>
            </div>

            <!-- Error State -->
            <div id="error-state" class="error-message" style="display: none;">
                <h2 class="text-xl font-bold mb-2">Article Not Found</h2>
                <p>The requested article could not be found. Please check the URL or <a href="index.html" class="text-blue-600 hover:underline">return to the homepage</a>.</p>
            </div>
            
            <!-- Article Container -->
            <article id="article-container" class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden" style="display: none;">
                <div class="p-8">
                    
                    <!-- Article Title -->
                    <h1 id="article-title" class="text-3xl md:text-4xl font-bold academic-title text-gray-900 mb-6 leading-tight">
                        Loading...
                    </h1>
                    
                    <!-- Author Information -->
                    <div class="author-info">
                        <h3 class="text-lg font-semibold mb-2">Author</h3>
                        <div id="author-container" class="space-y-2">
                            <!-- Authors will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Article Metadata -->
                    <div class="article-metadata">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <div>
                                <span class="font-semibold text-gray-700">Published:</span>
                                <span id="published-date" class="text-gray-600">Loading...</span>
                            </div>
                            <div>
                                <span class="font-semibold text-gray-700">Pages:</span>
                                <span id="page-range" class="text-gray-600">Loading...</span>
                            </div>
                            <div>
                                <span class="font-semibold text-gray-700">Volume:</span>
                                <span id="volume-info" class="text-gray-600">Loading...</span>
                            </div>
                            <div>
                                <span class="font-semibold text-gray-700">ISSN:</span>
                                <span id="issn-number" class="text-gray-600">Loading...</span>
                            </div>
                            <div class="md:col-span-2">
                                <div class="flex items-center gap-2">
                                    <span class="font-semibold text-gray-700 mr-2">PDF:</span>
                                    <button onclick="openPDF()" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition-colors">
                                        <i class="fas fa-file-pdf mr-1"></i>
                                        VIEW FULL PDF
                                    </button>
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Keywords -->
                    <div id="keywords-container" class="keywords">
                        <!-- Keywords will be populated by JavaScript -->
                    </div>
                    
                    <!-- Article Content -->
                    <div class="article-content mt-8">
                        
                        <!-- Abstract -->
                        <section class="mb-8">
                            <h2>Abstract</h2>
                            <p id="abstract-content">Loading abstract...</p>
                        </section>
                        
                    </div>
                </div>
            </article>
        </div>
    </main>

    <!-- Enhanced PDF Modal -->
<div id="pdfModal" class="pdf-modal">
    <div class="pdf-modal-content">
        <div class="pdf-header">
            <div id="modal-pdf-title" class="pdf-title">Loading...</div>
            <div class="pdf-controls">
                <button class="pdf-button" onclick="refreshPDF()" title="Refresh PDF">
                    <i class="fas fa-sync-alt"></i>
                    <span class="hidden sm:inline">Refresh</span>
                </button>
                <button class="pdf-button" onclick="openInNewTab()" title="Open in New Tab">
                    <i class="fas fa-external-link-alt"></i>
                    <span class="hidden sm:inline">New Tab</span>
                </button>
                <!-- CHANGED: Remove the anchor tag and use button with onclick -->
                <button class="pdf-button" onclick="downloadPDF()" title="Download PDF">
                    <i class="fas fa-download"></i>
                    <span class="hidden sm:inline">Download</span>
                </button>
                <button class="pdf-close" onclick="closePDF()" title="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="pdf-viewer-container">
            <iframe id="pdfFrame" class="pdf-iframe" src=""></iframe>
            <div id="pdfFallback" class="pdf-fallback">
                <div class="fallback-content">
                    <div class="fallback-icon">
                        <i class="fas fa-file-pdf"></i>
                    </div>
                    <div class="fallback-title">PDF Viewer Not Supported</div>
                    <div class="fallback-description">
                        Your browser doesn't support embedded PDF viewing. Please download the file to view it on your device.
                    </div>
                    <!-- CHANGED: Update fallback download button -->
                    <button onclick="downloadPDF()" class="download-button">
                        <i class="fas fa-download"></i>
                        Download PDF
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="col-span-1 md:col-span-2">
                    <div class="logo-container mb-4">
                        <img src="logo.png" alt="Quaf Academic Logo" class="logo-image">
                        <div class="logo-text-container">
                            <h1 class="logo-text text-white">Quaf Academic</h1>
                            <p class="logo-subtitle text-gray-300">Journal of Islamic Studies</p>
                        </div>
                    </div>
                    <p class="text-gray-300 mb-4">
                     <strong> MAILING ADDRESS:</strong><br>Editor, Quaf Academic Journal of Islamic Studies, Darul Hidaya Da'wa College,<br>Manoor,Kalady (PO), Malappuram (Dt.),<br>679582 (PIN), Kerala, India.<br><br>Email: info@quaf.me <br><br>Website: www.quaf.me
                    </p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="text-gray-300 hover:text-white transition-colors">Home</a></li>
                        <li><a href="index.html#about" class="text-gray-300 hover:text-white transition-colors">About Journal</a></li>
                        <li><a href="editors.html" class="text-gray-300 hover:text-white transition-colors">Editorial Board</a></li>
                        <li><a href="index.html#contact" class="text-gray-300 hover:text-white transition-colors">Contact Us</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Connect</h3>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">
                            <i class="fab fa-twitter text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">
                            <i class="fab fa-facebook text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">
                            <i class="fab fa-linkedin text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">
                            <i class="fas fa-envelope text-xl"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-300">
                <p>&copy; 2024 Quaf Academic Journal. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Include the unified data -->
<script src="sheets-loader.js"></script>
<!-- Include the main article script -->
<script src="article-script.js"></script>
    
</body>
</html>
